# Clickstream WP Plugin

A WordPress plugin for tracking user clickstream data.

## Setup Instructions

### Prerequisites
- Docker and Docker Compose installed
- Git
- Node.js and npm (for React development)

### Quick Start
1. Clone this repository: `git clone git@github.com:build-stack/clickstream-wp.git`
2. Run `chmod +x generate-config-keys.sh && ./generate-config-keys.sh` to generate secure WordPress salt keys
3. Run `docker-compose up -d`
4. Access WordPress at http://localhost:8000
5. The Clickstream WP plugin will be automatically available in the WordPress admin

## Plugin Architecture

Clickstream WP uses a modern architecture combining OOP PHP with a React admin interface:

### PHP Backend
- Organized using object-oriented programming principles
- Singleton pattern for the main plugin class
- Separation of concerns with specialized classes for different functionality
- REST API endpoints for communication with the admin interface

### React Admin Interface
- Modern React application built with TypeScript
- Tailwind CSS for styling
- HashRouter for WordPress admin navigation
- API client for communication with WordPress REST API

## Development Workflow

### Backend Development (PHP)
- Edit files in the `clickstream-wp/includes` directory
- Changes take effect immediately in WordPress
- No build process needed for PHP files

### Frontend Development (React)
1. Navigate to the client directory:
   ```
   cd clickstream-wp/client
   ```

2. Install dependencies:
   ```
   npm install
   ```

3. Start the development server:
   ```
   npm run dev
   ```

4. Build for production:
   ```
   npm run build
   ```
   This builds the assets to `clickstream-wp/assets/admin` where WordPress can access them.

## Directory Structure

- `clickstream-wp/`: Main plugin directory
  - `includes/`: PHP classes
    - `api/`: REST API controllers
    - `class-clickstream-wp.php`: Main plugin class
    - `class-clickstream-wp-admin.php`: Admin integration
    - `class-clickstream-wp-tracking.php`: Frontend tracking
  - `client/`: React application source
    - `src/`: React components and utilities
    - `src/pages/`: Page components
    - `src/components/`: Reusable components
    - `src/utils/`: Utility functions
  - `assets/`: Compiled frontend assets (generated by build)

## Docker Configuration

This project uses Docker to create a development environment with WordPress and MariaDB:

- **WordPress**: runs on port 8000 (http://localhost:8000)
- **MariaDB**: database exposed on port 3307

The Docker setup includes:
- WordPress with PHP 8.2 and Apache
- MariaDB as the database
- Volume mapping for the plugin and themes
- Custom wp-config.php with pre-configured database settings

## WordPress Configuration

The project includes a pre-configured wp-config.php file with database settings already set up. The main configuration includes:

- Database settings matching the MariaDB Docker container
- Debug mode enabled for development
- Security keys and salts (generated by the setup script)

### Auto-configuration

When you first access WordPress at http://localhost:8000, you'll only need to provide:
   - **Site Title**: Your Site Name
   - **Username**: admin (recommended)
   - **Password**: Choose a strong password (ALHA7IWxQSd5i&bE(C)
   - **Email**: your-email@example.com

### Manual Configuration

If you prefer to manually configure WordPress:

1. Visit http://localhost:8000 in your browser
2. Follow the standard WordPress setup process
3. The database settings are pre-configured, so you won't need to enter them

## Plugin Development

The Clickstream WP plugin is located in the `clickstream-wp` directory and mounted directly into the WordPress container.

To develop the plugin:
1. Edit files in the `clickstream-wp` directory
2. Changes will be immediately available in WordPress
3. Activate the plugin in the WordPress admin under Plugins

## Database Access

You can connect to the MariaDB database using:
- **Host**: localhost
- **Port**: 3307
- **Database**: wordpress
- **Username**: wpuser
- **Password**: wppassword

## Configuration Files

- `docker-compose.yml`: Docker services configuration
- `Dockerfile`: WordPress container setup
- `wp-config.php`: WordPress configuration
- `generate-config-keys.sh`: Script to generate secure WordPress authentication keys 